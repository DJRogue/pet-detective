<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-signin-client_id" content="673527265143-l8gvqn8e0qcm4o23nf914sd9hp0tj82c.apps.googleusercontent.com">

    <title>Pet Detective</title>
    <link href="styles.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
  </head>
<nav class="navbar navbar-inverse bg-primary">
  <!-- Navbar content -->
</nav>

  <body ng-app="pet-detective">

    <div class="container">
        <div class="row">
            <div class="col-md-4"></div>
                <div style="background-color: #64cc64" class="bg-primary col-md-4">
                    <div class="container">
                        <div class="row">
                            <div style="height: 500px" class="col-lg-12">
                                <span class="page-header">
                                    <h1>Hello, Pet Detective!</h1>
                                      <div class="col-md-2">
                                        <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
                                        <script>
                                        function onSignIn(googleUser) {
                                          // Useful data for your client-side scripts:
                                          const profile = googleUser.getBasicProfile();
                                          const email = profile.getEmail();
                                          // The ID token you need to pass to your backend:
                                          let id_token = googleUser.getAuthResponse().id_token;
                                          const xhr = new XMLHttpRequest();
                                          xhr.open('POST', '/tokensignin');
                                          xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                                          xhr.onload = function() {
                                            if (xhr.readyState === 4) {
                                              if (xhr.status === 200) {
                                                window.bool = true;
                                                window.postRes = xhr.responseText;
                                                console.log(xhr.responseText);
                                              } else {
                                                console.error(xhr.statusText);
                                              }
                                            }
                                          };
                                          xhr.send(`idtoken=${id_token}`);
                                          // SOMEHOW SAVE THE RESPONSE FROM THE ABOVE POST REQ IF THE VAR EXISTS RENDER EITHER
                                        };
                                        </script>
                                      </div>
                                      <div class="col-md-2">
                                        <a href="#" onclick="signOut();">Sign out</a>
                                        <script>
                                          function signOut() {
                                            var auth2 = gapi.auth2.getAuthInstance();
                                            auth2.signOut().then(function () {
                                              console.log('User signed out.');
                                            });
                                          }
                                        </script>
                                      </div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
              <div class="col-md-4">

            </div>


        </div>
    </div>

    <script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
    <script src="components/autocomplete.js"></script>
    <script src="map.config.js"></script>
    <script src="components/app.js"></script>
    <script src="components/dispatch.js"></script>
    <script src="components/staticMapDispatch.js"></script>
    <script src="components/search.js"></script>
    <script src="components/petForm.js"></script>
    <script src="components/fetchFormData.js"></script>
  </body>
</html>
